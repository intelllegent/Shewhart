observe({
  if (is.null(input$file1))
    return(NULL)
  cnames <- colnames(names())
  updateCheckboxGroupInput(session,label = "Выберите заголовки для отображения, затем нажмите на кнопку:",
                           inputId = "headers",
                           choices = cnames,
                           selected = cnames)
  updateActionButton(session,inputId = "show_table", label = "Show table")
})

actionButton("show_table", label = "Вывести таблицу"),


output$tbl <- renderDataTable({
  if (is.null(data())) return(NULL)
  if (length(input$show_vars) == 0L)
    return(data())
  else
    return(select(data(), one_of(input$show_vars)))
})
removeUI("#show_vars")
removeUI("#form_table")
}, ignoreInit = TRUE, once = TRUE) 